PC0 -> PC2
192.168.100.1 -> 192.168.100.129

<ARP Request>
-----------------
IP Header
Src : 192.168.100.1
Dst : 192.168.100.129
Protocol : ICMP
-----------------
Ethernet Header
Dst : 000D.BD67.9E01
Src : 0040.0BD4.E3A6
Type : IP
-----------------

Router에서 자신에게 온 Message를 Decapsulation하였는데, 하위 네트워크의 Host것이었다면,
Data를 이미 Decapsulation을 하였으므로, 새로 Data를 구성하여야 함.
-----------------
Ethernet Header
Dst : 0009.7CD2.A002  //  192.168.100.254  // Message가 새로 만들어지는 것이므로, 해당 Network 상의 Router 주소로 적용됨.
Src : 0003.E4C6.041A  // 192.168.100.129
Type : 
// => Packet Tracer에서 보면, Src-Host로부터의 Message가 Router를 거치는 동안에 데이터가 한번 X표시가 되는 경우가 있는데,
// 이는 해당 Dst변수의 논리주소를 갖는 장치가 실제로 물리/논리적으로 구성되어있는지 모르는 상태이므로, 확인을 하기 위한 지연임.

FastEthernet : 10/100 [Mbps]
Ethernet : 10 [Mbps]





192.168.100.00000001  (1)
192.168.100.10000001  (129)
255.255.255.10000000  (127)

Routing Table
Router가 Routing을 하기 위해 가지고 있는 정보 (ARP Table과 같은 것)
없으면 통신시켜주는 것이 안된다. (Dst Unreachable)
RoutingTable 확인
enable
password : cisco1234
show ip route로 확인 가능  //  "show arp"로 arp table 확인 가능

     192.168.100.0/25 is subnetted, 2 subnets  // (192.168.100.0/25, C Class의 영역이 2개로 Subnetting 되어있고, 아래와 같음.)
C       192.168.100.0 is directly connected, FastEthernet0/0  // 192.168.100.0의 영역은 FastEthernet 0/0에 연결되어있음.
C       192.168.100.128 is directly connected, FastEthernet0/1  // 192.168.100.128의 영역은 FastEthernet 0/1에 연결되어있음.
// 각각의 Prefix(Network ID, 여기서는 25)를 가지고 있는 2개의 네트워크
// => Dst IP만 주어져도, 해당 Host가 어디에 속해있어야 하는지를 알 수 있음. (Ex) 192.168.100.129)


<Router 실습>
WAN : PPP/HBLC (Point To Point)
LAN : Ethernet/FastEthernet (BMA, Broadcast Multi-Access)
활용 영역 : 192.168.100.0/24
--------------------------------------------------------------------------------
Router에 WAN구간 Interface Module (Serial Interface) 추가 : NM계열 / WIC계열(WIT-2T) 양측 Router에 추가
Cable : Serial DCE로 추가, Serial 0/0 Slot에 장착
--------------------------------------------------------------------------------

Subnetting
Network Required : 4 Network
(WAN 1, LAN 3)

192.168.100. 00 000000
255.255.255. 11 000000 => 필요 Network의 개수는 4개이므로
		    => /26

ⓐ LAN01 - 192.168.100. 00 000000(0) ~ 192.168.100.63/26
ⓑ LAN02 - 192.168.100. 01 000000(64) ~ 192.168.100.127/26
ⓒ LAN03 - 192.168.100. 10 000000(128) ~ 192.168.100.191/26
ⓓ LAN04 - 192.168.100. 11 000000(192) ~ 192.168.100.255/26

ⓐ, ⓑ, ⓒ LAN 설정 진행
ⓐ	Network Addr : 192.168.100.0/26
	Usable Host : 192.168.100.1/26 ~ 192.168.100.62/26
	Broadcast Addr : 192.168.100.63/26
	Subnetmask : 255.255.255.192

ⓑ	Network Addr : 192.168.100.64
	Usable Host : 192.168.100.1/65 ~ 192.168.100.126/26
	Broadcast Addr : 192.168.100.127/26
	Subnetmask : 255.255.255.192

ⓒ	Network Addr : 192.168.100.128
	Usable Host : 192.168.100.129/26 ~ 192.168.100.190/26
	Broadcast Addr : 192.168.100.191/26
	Subnetmask : 255.255.255.192

ⓓ	WAN은 점대점 연결로, 2개의 Host 이외에는 필요 없으므로, VLSM으로 나눠준다.
	ⓓ LAN04 - 192.168.100. 11 000000(192) ~ 192.168.100.255/26
		   192.168.100. 11 0000 00
		   255.255.255. 11 0000 00 => 필요 Host 수는 2개이므로

		192.168.100.11 0000 00 (192.168.100.192/30)
		192.168.100.11 0000 11 (192.168.100.195/30)
		255.255.255.11 1111 00 (255.255.255.252, /30)
			Network Addr 	: 192.168.100.192/30
			Usable Host	: 192.168.100.193/30 ~ 192.168.100.194/30
			Broadcast Addr	: 192.168.100.195/30
			Subnetmask	: 255.255.255.252 (/30)

<Router 설정 진행>
	----------------------------------
	<Router0> WAN 1 / LAN 1
	enable
	configure terminal  //  전역설정
	hostname Router0
	interface fastethernet 0/0
	ip address 192.168.100.62 255.255.255.192
	no shutdown
	exit
	interface Serial 0/0
	ip address 192.168.100.193 255.255.255.252
	encapsulation ?  //  각각의 통신 동기화 방식을 조회 (Frame-Relay(WAN 구간에서 Multi-Access 필요), hdlc(Point To Point, PPP와 Frame 형식만 다름), PPP(Point To Point, HDLC와 Frame 형식만 다름))
	encapsulation hdlc		//  DCE 케이블을 연결할 당시, 시작점은 DTE가 되고, 종점은 DCE가 됨.
	clock rate ?  //  DTE측 Clock-Rate를 조회하기 위함
	clock rate 1000000  //  1 [Mbps]로 동기화 (물리적 장치에 대한 속도)
	bandwidth ?  //  논리적 속도 (Kilobits 단위, Routing Protocol이 참조할 수 있는 값으로서 사용, 어디가 더 빠른 연결속도 구간인가?)
	bandwidth 1000  //  Clockrate와 맞춰주면 됨
	no shutdown
	exit
	----------------------------------
	<Router1> WAN 1 / LAN 2
	en	//  enable
	conf term  //  configure terminal
	hostname Router1
	interface fastethernet 0/0
	ip address 192.168.100.126 255.255.255.192
	no shutdown
	exit
	interface fastethernet 0/1
	ip address 192.168.100.190 255.255.255.192
	no shutdown
	exit
	interface serial 0/0
	ip address 192.168.100.194 255.255.255.252
	encapsulation hdlc
	clock rate 1000000 //  DCE(Router0)측에서 이미 지정해주었으므로, 지정할 필요가 없음
	bandwidth 1000
	no shutdown
	exit
	----------------------------------
	<Static Routing>
	IP만 어느정도 입력해 둔 상태에서 Ping을 입력하면 통신이 안됨
	"Reply from 192.168.100.62 : Destination host unreachable." (Router로부터 받은 메시지)
	//  Ethernet 2계층 데이터를 Decapsulation 후, 3계층 데이터를 해석하였는데, 해당 Header의 Dst Addr에 대한 정보가 없음.
	//  그러므로, Routing을 위한 Routing Table에 Dst에 대한 경로 정보가 있어야 함.
	//  Static으로 Routing Table 정보를 입력 (Static Routing)
	//  Dynamic Routing의 경우, Protocol의 도움을 받아서 Routing 정보 입력 (RIP, EIGRP, OSPF)
	ip route 192.168.100.64 255.255.255.192 192.168.100.194 //  ip route [Network IP] [Subnetmask Of Host] [Next Hop Address(Dst측)]
	no ip route 192.168.100.64 255.255.255.192 192.168.100.194  //  해당 Static 지울 때는 앞에 no만 추가 입력
	route 192.168.100.64 255.255.255.192 192.168.100.194 10 //  ip route [Network] [Host's Subnet] [Next Hop] [Distance *옵션"]  //  Distance는? 최적의 전송 거리(Best Path)에 대한 척도값을 입력해줌
						      // Static의 경우, Distance의 값은 자동으로 갱신되지 않는다. 그러므로, 관리자가 직접 갱신해줘야함.
	do show ip route	// Routing Table 조회
	
	//  직접적으로 연결된 "C" Connected, 정적으로 추가된 "S" Static, Routing Protocol을 통해 동적으로 추가된 "D"


<PC 설정 진행>
	----------------------------------
	<PC0>
	----------------------------------




----------------------------------------------------------------------------------------------------------------------------------------
<예제 풀이>
----------------------------------------------------------------------------------------------------------------------------------------
1단계 Subnetting
	필요 Network 수 : WAN 2, LAN 3
	ⓐ LAN 1	192.168.100.00 000000/24 ~ 192.168.100.00 111111/24 (0~63)
	    	Network ID : 192.168.100.0
	    	Usable addr : 192.168.100.1 ~ 192.168.100.62
	    	Broadcast Addr : 192.168.100.63
	    	255.255.255.11 000000 (192)

	ⓑ LAN 2	192.168.100.01 000000/24 ~ 192.168.100.01 111111/24 (64~127)
	    	Network ID : 192.168.100.64
	   	Usable addr : 192.168.100.65 ~ 192.168.100.126
	    	Broadcast Addr : 192.168.100.127

	ⓒ LAN 3	192.168.100.10 000000/24 ~ 192.168.100.10 111111/24 (128~191)
	    	Network ID : 192.168.100.128
	    	Usable addr : 192.168.100.129 ~ 192.168.100.190
	    	Broadcast Addr : 192.168.100.191

	ⓓ LAN 4	192.168.100.11 000000/24 ~ 192.168.100.11 111111/24 (192~255)
	    	Network ID : 192.168.100.192
	    	Usable addr : 192.168.100.193 ~ 192.168.100.254
	    	Broadcast Addr : 192.168.100.255

	ⓑ에서,	192.168.100.01 0 00000/25 ~ 192.168.100.01 0 11111/25
		Network ID : 192.168.100.64/25 ~ 192.168.100.95/25
		Usable : 192.168.100.65/25 ~ 192.168.100.94/25
		BC : 192.168.100.95
		255.255.255.224

		192.168.100.01 1 00000/25 ~ 192.168.100.01 1 11111/25
		Network ID : 192.168.100.96/25 ~ 192.168.100.127/25
		Usable : 192.168.100.96/25 ~ 192.168.100.126
		BC : 192.168.100.127

	ⓓ에서, VLSM으로 WAN Subnetting (2 Host * 2 WAN)
		192.168.100.11 000000/24 ~ 192.168.100.11 111111/24 (248~251)
		192.168.100.11 000 0 00/30 ~ 192.168.100.11 000 0 11/30 (248 ~ 251)
		NID : 192.168.100.248
		Usable : 192.168.100.249 , 192.168.100.250
		BC : 192.168.100.255
		255.255.255.11 111 0 00 (252)

		192.168.100.11 000 1 00/30 ~ 192.168.100.11 000 1 11/30 (252 ~ 255)
		NID : 192.168.100.252
		Usable : 192.168.100.253 , 192.168.100.254
		BC : 192.168.100.255
----------------------------------------------------------------------------------------------------------------------------------------
2단계 장비 설정
   1) Router IP 설정
	■ WAN1
		Network ID : 192.168.100.248
		Usable Addr.: 192.168.100.249 / 192.168.100.250
		Broadcast ID : 192.168.100.251
		Subnetmask : 255.255.255.252		
	■ WAN2
		Network ID : 192.168.100.252
		Usable Addr.: 192.168.100.253 / 192.168.100.254
		Broadcast ID : 192.168.100.255
		Subnetmask : 255.255.255.252
	!-Router0
		en
		conf term
		hostname Router0
		inter fastethernet 0/0
		ip address 192.168.100.62 255.255.255.192
		no shutdown
		exit
		interface serial 0/0
		ip address 192.168.100.249 255.255.255.252
		encap hdlc
		clock rate 1000000 //  DCE (Router0)
		bandwidth 1000
		no shutdown
		exit
	!-Router1
		en
		conf term
		hostname Router1
		inter fastethernet 0/0
		ip address 192.168.100.94 255.255.255.224
		no shutdown
		exit
		interface serial 0/0
		ip address 192.168.100.250 255.255.255.252
		encap hdlc
		bandwidth 1000 // DTE (Router1)
		no shutdown
		exit
		interface serial 0/1
		ip address 192.168.100.253 255.255.255.252
		encap hdlc
		clock rate 1000000 //  DCE (Router1)
		bandwidth 1000
		no shutdown
		exit
	!-Router2
		en
		conf term
		hostname Router2
		inter fastethernet 0/0
		ip address 192.168.100.126 255.255.255.224
		no shutdown
		exit
		interface serial 0/1
		ip address 192.168.100.254 255.255.255.252
		encap hdlc
		bandwidth 1000 // DTE (Router2)
		no shutdown
		exit
   2) Static Routing
	!-Router0
	!- 별도 라우팅 없이 L1User가 L2User에게 메시지를 보내면, "Destination Host Unreachable" (대상을 찾을 수 없으므로)
		en
		show ip route
		ip route 192.168.100.64 255.255.255.224 192.168.100.250
		ip route 192.168.100.96 255.255.255.224 192.168.100.250
	!- 이 상태만 진행을 한 후, L1User가 L2User에게 메시지를 보내면, "Request Time Out"! (대상을 찾을 수는 있으나, 대상이 응답을 못함)
	!-Router1
		en
		show ip route
		ip route 192.168.100.0 255.255.255.192 192.168.100.249
		ip route 192.168.100.96 255.255.255.224 192.168.100.254
	!-Router2
		en show ip route
		ip route 192.168.100.64 255.255.255.224 192.168.100.253
		ip route 192.168.100.0 255.255.255.192 192.168.100.253
	[Next Hop]의 경우, 바로 다음 Router의 주소만 넣으면 됨. (지하철에서, (전체 노선도 말고) 바로 다음 역만 알려주는 것과 같다고 보면 됨)
   3) 설정 저장 및 종료
	R0#copy running-config startup-config
	Destination filename [startup-config]? 
	Building configuration...
	[copy running-config startup-config] 명령어로 저장, Router 전원 Out시 모든 설정이 초기화됨

   3) PC 설정
	■ L1User
		Network ID : 192.168.100.0
		Usable Addr.: 192.168.100.1 ~ 192.168.100.61
		Gateway : 192.168.100.62
		Broadcast ID : 192.168.100.63
		Subnetmask : 255.255.255.192
	■ L2User
		Network ID : 192.168.100.64
		Usable Addr.: 192.168.100.65 ~ 192.168.100.93
		Gateway : 192.168.100.94
		Broadcast ID : 192.168.100.95
		Subnetmask : 255.255.255.224
	■ L3User
		Network ID : 192.168.100.96
		Usable Addr.: 192.168.100.97 ~ 192.168.100.125
		Gateway : 192.168.100.126
		Broadcast ID : 192.168.100.127
		Subnetmask : 255.255.255.224
----------------------------------------------------------------------------------------------------------------------------------------






